{"remainingRequest":"/home/admin/Documents/spring-graph-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/spring-graph-vue/src/App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/admin/Documents/spring-graph-vue/src/App.vue","mtime":1583481908338},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-graph-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwovLyBpbXBvcnQgSGVsbG9Xb3JsZCBmcm9tICIuL2NvbXBvbmVudHMvSGVsbG9Xb3JsZC52dWUiOwoKLy8gQUREIFRIRSBORVcgQ09NUE9ORU5UUwppbXBvcnQgVXNlciBmcm9tICIuL2NvbXBvbmVudHMvVXNlci52dWUiOwppbXBvcnQgQWRtaW4gZnJvbSAiLi9jb21wb25lbnRzL0FkbWluLnZ1ZSI7CmltcG9ydCBOYXYgZnJvbSAiLi9jb21wb25lbnRzL05hdi52dWUiOwoKLy8gQUREIEtFWUNMT0FLCmltcG9ydCBLZXljbG9hayBmcm9tICIuLi9ub2RlX21vZHVsZXMva2V5Y2xvYWstanMvZGlzdC9rZXljbG9hayI7CgovLyBBREQgQVBJCi8vIGltcG9ydCBhcGkgZnJvbSAiLi9jb21wb25lbnRzL2FwaSI7CgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgQXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogIkFwcCIsCgogIGNvbXBvbmVudHM6IHsKICAgIFVzZXIsCiAgICBBZG1pbiwKICAgIE5hdgogIH0sCgogIGRhdGE6ICgpID0+ICh7CiAgICBjb21wb25lbnROYW1lOiAiIiwKICAgIHBlb3BsZUFycjogW10sCiAgICBwZW9wbGVIZWFkZXI6IFsiSUQiLCAiTmFtZSIsICJBZGRyZXNzIiwgIlBob25lIl0sCiAgICByb2xlOiBTdHJpbmcsCiAgICBoZWFkZXJOYW1lOiBTdHJpbmcsCiAgICBpbml0T3B0aW9uczogewogICAgICByZWFsbTogImtleWNsb2FrLWRlbW8iLAogICAgICB1cmw6ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXV0aC8iLAogICAgICBjbGllbnRJZDogInZ1ZS10ZXN0LWFwcCIKICAgIH0sCiAgICBrZXljbG9hazogS2V5Y2xvYWsoKQogIH0pLAogIG1ldGhvZHM6IHsKICAgIGxvYWRQYWdlKCk6IGFueSB7CiAgICAgIC8vIFRISVMgSVMgVEhFIENPUElFRCBDT0RFIEZST00gVEhFIEtFWUNMT0FLIEFETUlOSVNUUkFUSU9OIENPTlNPTEUuIEpVU1QgQURBUFQgSVQsIFNPIFRIQVQgSVQgTUFUSEVTIFRISVMgRk9STUFUCiAgICAgIHRoaXMua2V5Y2xvYWsgPSBLZXljbG9hayh0aGlzLmluaXRPcHRpb25zKTsKCiAgICAgIGxldCByb2xlcyA9ICIiOwoKICAgICAgdGhpcy5rZXljbG9hawogICAgICAgIC5pbml0KHsKICAgICAgICAgIG9uTG9hZDogImxvZ2luLXJlcXVpcmVkIgogICAgICAgIH0pCiAgICAgICAgLnN1Y2Nlc3MoKGF1dGg6IGFueSkgPT4gewogICAgICAgICAgLy8gQ0hFQ0sgSUYgVEhFIFVTRVIgSVMgQVVUSEVOVElDQVRFRAogICAgICAgICAgaWYgKCFhdXRoKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTVUNDRVNTRlVMTFkgQVVUSEVOVElDQVRFRCIpOwoKICAgICAgICAgICAgLy8gQ0hFQ0sgV0hBVCBST0xFUyBUSEVZIEhBVkUgQU5EIERJU1BMQVkgVEhFIENPTVBPTkVOVCBBQ0NPUkRJTkcgVE8gVEhFIFJPTEUKICAgICAgICAgICAgcm9sZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMua2V5Y2xvYWsudG9rZW5QYXJzZWQpKTsKICAgICAgICAgICAgdGhpcy5yb2xlID0gcm9sZXMucmVhbG1fYWNjZXNzLnJvbGVzOwogICAgICAgICAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSBTdHJpbmcodGhpcy5yb2xlKTsKCiAgICAgICAgICAgIHRoaXMuaGVhZGVyTmFtZSA9IHRoaXMuY29tcG9uZW50TmFtZSA9PSAiYWRtaW4iID8gInB1cnBsZSIgOiAidGVhbCI7CgoKICAgICAgICAgICAgLy8gTUFLRSBDQUxMIFRPIFJFU1QgU0VSVklDRQogICAgICAgICAgICBjb25zdCBBWElPUyA9IGF4aW9zLmNyZWF0ZSh7CiAgICAgICAgICAgICAgYmFzZVVSTDogYC9gLAogICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAsCiAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBxdWVyeTogYAogICAgICAgICAgICAgICAgcXVlcnkgewogICAgICAgICAgICAgICAgICBwZW9wbGVzKGNvdW50OiAxKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGlkLAogICAgICAgICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICBwaG9uZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBBWElPUy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6OTA5MCIpCiAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIC8vRElTUExBWSBEQVRBIElOIENPTVBPTkVOVAogICAgICAgICAgICAgICAgLy8gdGhpcy5wZW9wbGVBcnIucHVzaChyZXMuZGF0YS5pZCk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLnBlb3BsZUFyci5wdXNoKHJlcy5kYXRhLm5hbWUpOwogICAgICAgICAgICAgICAgLy8gaWYgKHJlcy5kYXRhLmFkZHJlc3MgPT0gIiIgfHwgcmVzLmRhdGEuYWRkcmVzcyA9PSAiIikgewogICAgICAgICAgICAgICAgLy8gICB0aGlzLnBlb3BsZUFyci5wdXNoKCJDT05GSURFTlRJQUwiKTsKICAgICAgICAgICAgICAgIC8vICAgdGhpcy5wZW9wbGVBcnIucHVzaCgiQ09ORklERU5USUFMIik7CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlcnJvcik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gU0VUIFRIRSBUT0tFTiBJTiBUSEUgTE9DQUxTVE9SQUdFCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidnVlLXRva2VuIiwgU3RyaW5nKHRoaXMua2V5Y2xvYWsudG9rZW4pKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKAogICAgICAgICAgICAidnVlLXJlZnJlc2gtdG9rZW4iLAogICAgICAgICAgICBTdHJpbmcodGhpcy5rZXljbG9hay5yZWZyZXNoVG9rZW4pCiAgICAgICAgICApOwoKICAgICAgICAgIC8vIEhBTkRMRSBUT0tFTiBUSU1FT1VUCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5rZXljbG9hawogICAgICAgICAgICAgIC51cGRhdGVUb2tlbig3MCkKICAgICAgICAgICAgICAuc3VjY2VzcyhyZWZyZXNoZWQgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hlZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVG9rZW4gUmVmcmVzaGVkIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVG9rZW4gTm90IFJlZnJlc2hlZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmVycm9yKCgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGYWlsZWQgVG8gUmVmcmVzaCBUb2tlbiIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgNjAwMDApOwogICAgICAgIH0pCiAgICAgICAgLmVycm9yKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJBVVRIRU5USUNBVElPTiBGQUlMRUQiKTsKICAgICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQYWdlKCk7CiAgfQp9KTsK"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <Nav v-bind:headerName=\"headerName\" v-bind:keycloak=\"keycloak\" />\n    <v-content>\n      <component\n        v-bind:is=\"componentName\"\n        v-bind:peopleArr=\"peopleArr\"\n        v-bind:peopleHeader=\"peopleHeader\"\n      />\n      <!-- <v-btn v-on:click=\"logOut\">LOGOUT</v-btn> -->\n    </v-content>\n    <!-- <v-content>\n      <HelloWorld />\n    </v-content>-->\n  </v-app>\n</template>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\n// import HelloWorld from \"./components/HelloWorld.vue\";\n\n// ADD THE NEW COMPONENTS\nimport User from \"./components/User.vue\";\nimport Admin from \"./components/Admin.vue\";\nimport Nav from \"./components/Nav.vue\";\n\n// ADD KEYCLOAK\nimport Keycloak from \"../node_modules/keycloak-js/dist/keycloak\";\n\n// ADD API\n// import api from \"./components/api\";\n\nimport axios from \"axios\";\nimport Axios from \"axios\";\n\nexport default Vue.extend({\n  name: \"App\",\n\n  components: {\n    User,\n    Admin,\n    Nav\n  },\n\n  data: () => ({\n    componentName: \"\",\n    peopleArr: [],\n    peopleHeader: [\"ID\", \"Name\", \"Address\", \"Phone\"],\n    role: String,\n    headerName: String,\n    initOptions: {\n      realm: \"keycloak-demo\",\n      url: \"http://localhost:8080/auth/\",\n      clientId: \"vue-test-app\"\n    },\n    keycloak: Keycloak()\n  }),\n  methods: {\n    loadPage(): any {\n      // THIS IS THE COPIED CODE FROM THE KEYCLOAK ADMINISTRATION CONSOLE. JUST ADAPT IT, SO THAT IT MATHES THIS FORMAT\n      this.keycloak = Keycloak(this.initOptions);\n\n      let roles = \"\";\n\n      this.keycloak\n        .init({\n          onLoad: \"login-required\"\n        })\n        .success((auth: any) => {\n          // CHECK IF THE USER IS AUTHENTICATED\n          if (!auth) {\n            window.location.reload();\n          } else {\n            console.log(\"SUCCESSFULLY AUTHENTICATED\");\n\n            // CHECK WHAT ROLES THEY HAVE AND DISPLAY THE COMPONENT ACCORDING TO THE ROLE\n            roles = JSON.parse(JSON.stringify(this.keycloak.tokenParsed));\n            this.role = roles.realm_access.roles;\n            this.componentName = String(this.role);\n\n            this.headerName = this.componentName == \"admin\" ? \"purple\" : \"teal\";\n\n\n            // MAKE CALL TO REST SERVICE\n            const AXIOS = axios.create({\n              baseURL: `/`,\n              timeout: 1000,\n              method: \"GET\",\n              data: {\n                query: `\n                query {\n                  peoples(count: 1)\n                    {\n                      id,\n                      name,\n                      address,\n                      phone\n                    }\n                  }\n                `\n              }\n            });\n\n            AXIOS.get(\"http://localhost:9090\")\n              .then(res => {\n                console.log(res.data);\n                //DISPLAY DATA IN COMPONENT\n                // this.peopleArr.push(res.data.id);\n                // this.peopleArr.push(res.data.name);\n                // if (res.data.address == \"\" || res.data.address == \"\") {\n                //   this.peopleArr.push(\"CONFIDENTIAL\");\n                //   this.peopleArr.push(\"CONFIDENTIAL\");\n                // }\n              })\n              .catch(error => {\n                this.errors.push(error);\n              });\n          }\n\n          // SET THE TOKEN IN THE LOCALSTORAGE\n          localStorage.setItem(\"vue-token\", String(this.keycloak.token));\n          localStorage.setItem(\n            \"vue-refresh-token\",\n            String(this.keycloak.refreshToken)\n          );\n\n          // HANDLE TOKEN TIMEOUT\n          setTimeout(() => {\n            this.keycloak\n              .updateToken(70)\n              .success(refreshed => {\n                if (refreshed) {\n                  console.log(\"Token Refreshed\");\n                } else {\n                  console.log(\"Token Not Refreshed\");\n                }\n              })\n              .error(() => {\n                console.log(\"Failed To Refresh Token\");\n              });\n          }, 60000);\n        })\n        .error(() => {\n          console.log(\"AUTHENTICATION FAILED\");\n        });\n    }\n  },\n  mounted() {\n    this.loadPage();\n  }\n});\n</script>\n"]}]}